import ROOT, os
from pcsim.util import path
import pcsim

'''Load the PCSIM libraries and their dependencies.'''
def root_loaded():
    return (hasattr(ROOT, 'pcsim_loaded') and ROOT.pcsim_loaded  is 1)

def setup_root():
    print('%s: Loading PCSIM python/ROOT bindings' % __name__)

    ROOT.gROOT.ProcessLine('.x %s' % path.setup_root_path())

    ## process one of the pcsim headers to check all is OK
    ROOT.gROOT.ProcessLine('#include <pcsim/core/pdg.hh>')
    ## make root as loaded
    ROOT.gROOT.ProcessLine('int pcsim_loaded = 1;')

    if root_loaded():
        print('%s: PCSIM python/ROOT successfully loaded' % __name__)
    else:
        raise IOError('%s: Failed to load PCSIM python/ROOT' % __name__)
      
