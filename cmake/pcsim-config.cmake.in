# - Config file for the FooBar package
# It defines the following variables
#  PCSIM_INCLUDE_DIRS   - include directories for pcsim
#  PCSIM_DEFINITIONS    - definitions needed to compile against pcsim
#  PCSIM_LIBRARIES      - Libraries to link against
 
# Enable languages
enable_language(CXX)

# Compute paths
get_filename_component(PCSIM_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
set(PCSIM_INCLUDE_DIRS "@CONF_INCLUDE_DIRS@/..")
set(PCSIM_DEFINITIONS "@CONF_DEFINITIONS@")

# Our library dependencies (contains definitions for IMPORTED targets)
if(NOT TARGET pcsim AND NOT pcsim_BINARY_DIR)
  include("${PCSIM_CMAKE_DIR}/pcsim-targets.cmake")
endif()
 
# These are IMPORTED targets created by pcsim-targets.cmake
set(PCSIM_LIBRARIES @TARGETS@)

# Add the external libraries
find_package(root REQUIRED)
find_package(Boost COMPONENTS program_options filesystem system REQUIRED)
set(PCSIM_LIBRARIES ${PCSIM_LIBRARIES} ${ROOT_LIBRARIES} ${Boost_LIBRARIES})
set(PCSIM_INCLUDE_DIRS ${PCSIM_INCLUDE_DIRS} ${ROOT_INCLUDE_DIRS} ${Boost_INCLUDE_DIRS})

## Extra rpath stuff for MacOS
if(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
  set(CMAKE_INSTALL_RPATH 
    ${CMAKE_INSTALL_RPATH} 
    "@CMAKE_INSTALL_PREFIX@/@CMAKE_INSTALL_LIBDIR@")
  message("Podd: set rpath to ${CMAKE_INSTALL_RPATH}")
endif()
