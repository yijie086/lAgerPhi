Bootstrap: docker
From: eicweb.phy.anl.gov:4567/monte_carlo/lager/lager:3.1.1

%help
  lager quarkonium generator container
  Tools: 
     - lager      : main generator
     - root       : root version as used by lager

%labels
  Maintainer "Sylvester Joosten"
  Version v3.0

%environment -c /bin/bash
  export PYTHONPATH=/usr/local/lib:$PYTHONPATH
  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH

%post -c /bin/bash
  echo "  -------------------------------------------------"
  echo "  ===> Image setup complete"
  echo "  -------------------------------------------------"

# ===================================
# GLOBAL
# ===================================

%environment -c /bin/bash
  export PYTHONPATH=/usr/local/lib:$PYTHONPATH
  export PATH=/usr/loca/bin:${PATH}
  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  export ROOT_INCLUDE_PATH=/usr/local/include

%runscript
  echo "Launching a shell in the lager container."
  echo "Use through singularity apps recommended (see help for more info)."
  exec bash

# =======================
# lager
# =======================
%apprun lager
  lager "$@"

%appenv lager
  export PYTHONPATH=/usr/local/lib:${PYTHONPATH}
  export PATH=/usr/local/bin:${PATH}
  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  export ROOT_INCLUDE_PATH=/usr/local/include/podd:/usr/local/include/hcana

# =======================
# root
# =======================
%apprun root
  root "$@"

%appenv root
  export PYTHONPATH=/usr/local/lib:${PYTHONPATH}
  export PATH=/usr/local/bin:${PATH}
  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  export ROOT_INCLUDE_PATH=/usr/local/include/podd:/usr/local/include/hcana
